import{_ as O,e as r,b as l,d as t,F as B,r as S,t as p,n as v,f as J,g as q,h as x,a as W,i as X,c as I,w as _,j as f,o as z,k as K,l as j,s as D,S as N,m as E,p as A,v as Z,q as T,T as R,x as b,y as U}from"./app-C-qkH5mP.js";import{D as $}from"./Sidebar-BcOW22Pq.js";import"./theme-DUdhtcv_.js";const tt={name:"DataTable",props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},loading:{type:Boolean,default:!1},error:{type:String,default:null},emptyMessage:{type:String,default:"Tidak ada data"}}},et={class:"table"},at={class:"thead"},st={class:"tbody"},nt={key:0,class:"animate-pulse"},ot=["colspan"],lt={key:1,class:"bg-pastel-red-400 dark:bg-pastel-red-800"},rt=["colspan"],it={key:2},dt=["colspan"];function ct(c,e,s,a,d,g){return l(),r("table",et,[t("thead",at,[t("tr",null,[(l(!0),r(B,null,S(s.columns,o=>(l(),r("th",{key:o.key,class:v([o.align==="right"?"text-right":"text-left","th"])},p(o.label),3))),128))])]),t("tbody",st,[s.loading?(l(),r("tr",nt,[t("td",{colspan:s.columns.length,class:"px-6 py-4 text-center"},e[0]||(e[0]=[t("div",{class:"flex items-center justify-center"},[t("span",{class:"w-6 h-6 text-gray-400 material-icons animate-spin dark:text-gray-300"},"sync"),t("span",{class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},"Loading data...")],-1)]),8,ot)])):s.error?(l(),r("tr",lt,[t("td",{colspan:s.columns.length,class:"px-6 py-4 text-sm text-center text-red-500 dark:text-red-400"},p(s.error),9,rt)])):s.items.length===0?(l(),r("tr",it,[t("td",{colspan:s.columns.length,class:"px-6 py-4 text-sm text-center text-gray-500 dark:text-gray-400"},p(s.emptyMessage),9,dt)])):(l(!0),r(B,{key:3},S(s.items,o=>(l(),r("tr",{key:o.id,class:"tr"},[J(c.$slots,"row",{item:o})]))),128))])])}const ut=O(tt,[["render",ct],["__file","C:/laragon/www/caricar/resources/js/components/layouts/DataTable.vue"]]),gt={name:"Pagination",props:{currentPage:{type:Number,required:!0},lastPage:{type:Number,required:!0},from:{type:Number,required:!0},to:{type:Number,required:!0},total:{type:Number,required:!0}},setup(c){return{paginationRange:W(()=>{const s=[];let d=Math.max(1,c.currentPage-2),g=Math.min(c.lastPage,d+5-1);g-d+1<5&&(d=Math.max(1,g-5+1));for(let o=d;o<=g;o++)s.push(o);return s})}},emits:["change-page"]},mt={key:0,class:"pagination"},pt={class:"pagination-summary"},ft={class:"pagination-info"},kt={class:"pagination-info-text"},ht={class:"pagination-info-subtext"},_t={class:"pagination-info-subtext"},bt={class:"pagination-info-subtext"},vt={class:"pagination-section"},xt={class:"pagination-nav","aria-label":"Pagination"},yt=["disabled"],wt=["disabled"],Pt=["onClick"],Ct=["disabled"],Tt=["disabled"];function Et(c,e,s,a,d,g){return s.lastPage>1?(l(),r("div",mt,[t("div",pt,[t("div",ft,[t("p",kt,[e[4]||(e[4]=x(" Showing ")),t("span",ht,p(s.from),1),e[5]||(e[5]=x(" to ")),t("span",_t,p(s.to),1),e[6]||(e[6]=x(" of ")),t("span",bt,p(s.total),1),e[7]||(e[7]=x(" results "))])]),t("div",vt,[t("nav",xt,[t("button",{onClick:e[0]||(e[0]=o=>c.$emit("change-page",1)),disabled:s.currentPage===1,class:v(["pagination-first",{disabled:s.currentPage===1}])},e[8]||(e[8]=[t("span",{class:"text-sm material-icons"},"first_page",-1)]),10,yt),t("button",{onClick:e[1]||(e[1]=o=>c.$emit("change-page",s.currentPage-1)),disabled:s.currentPage===1,class:v(["pagination-prev",{disabled:s.currentPage===1}])},e[9]||(e[9]=[t("span",{class:"text-sm material-icons"},"chevron_left",-1)]),10,wt),(l(!0),r(B,null,S(a.paginationRange,o=>(l(),r("button",{key:o,onClick:n=>c.$emit("change-page",o),class:v([o===s.currentPage?"active":"inactive","pagination-item"])},p(o),11,Pt))),128)),t("button",{onClick:e[2]||(e[2]=o=>c.$emit("change-page",s.currentPage+1)),disabled:s.currentPage===s.lastPage,class:v(["pagination-next",{disabled:s.currentPage===s.lastPage}])},e[10]||(e[10]=[t("span",{class:"text-sm material-icons"},"chevron_right",-1)]),10,Ct),t("button",{onClick:e[3]||(e[3]=o=>c.$emit("change-page",s.lastPage)),disabled:s.currentPage===s.lastPage,class:v(["pagination-last",{disabled:s.currentPage===s.lastPage}])},e[11]||(e[11]=[t("span",{class:"text-sm material-icons"},"last_page",-1)]),10,Tt)])])])])):q("v-if",!0)}const Bt=O(gt,[["render",Et],["__file","C:/laragon/www/caricar/resources/js/components/layouts/Pagination.vue"]]),St={__name:"Index",setup(c,{expose:e}){e();const s=void 0,a=f([]),d=f(null),g=f(null),o=f(!0),n=f(null),m=f("");let y=null;const k=f({current_page:1,last_page:1,from:0,to:0,total:0}),V=[{key:"logo",label:"Logo"},{key:"name",label:"Nama Brand"},{key:"actions",label:"Aksi",align:"right"}],w=async(i="",h=1)=>{var P,C;o.value=!0,n.value=null;try{const u=await j.get("/api/brand",{params:{search:i,page:h},headers:{Authorization:`Bearer ${D.getItem(N.TOKEN)}`}});a.value=u.data.data.data,k.value={current_page:u.data.data.current_page,last_page:u.data.data.last_page,from:u.data.data.from,to:u.data.data.to,total:u.data.data.total}}catch(u){n.value=((C=(P=u.response)==null?void 0:P.data)==null?void 0:C.message)||u.message}finally{o.value=!1}},H=()=>{y&&clearTimeout(y),y=setTimeout(()=>{k.value.current_page=1,w(m.value,k.value.current_page)},300)},Q=i=>{i>=1&&i<=k.value.last_page&&w(m.value,i)},Y=async(i,h)=>{var C,u;if((await E.fire({title:"Konfirmasi Hapus",text:`Apakah Anda yakin ingin menghapus ${h}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",background:document.documentElement.classList.contains("dark")?"#1F2937":"#fff",color:document.documentElement.classList.contains("dark")?"#fff":"#000"})).isConfirmed)try{const L=D.getItem(N.TOKEN);await j.delete(`/brand/${i}`,{headers:{Authorization:`Bearer ${L}`}}),await E.fire({title:"Berhasil!",text:"Item berhasil dihapus",icon:"success",timer:1500,background:document.documentElement.classList.contains("dark")?"#1F2937":"#fff",color:document.documentElement.classList.contains("dark")?"#fff":"#000"}),await w(m.value,k.value.current_page)}catch(L){await E.fire({title:"Error!",text:((u=(C=L.response)==null?void 0:C.data)==null?void 0:u.message)||"Terjadi kesalahan saat menghapus item",icon:"error",background:document.documentElement.classList.contains("dark")?"#1F2937":"#fff",color:document.documentElement.classList.contains("dark")?"#fff":"#000"})}},G=(i,h)=>{h.stopPropagation(),d.value=d.value===i?null:i,g.value=a.value.find(P=>P.id===i)},M=i=>{!i.target.closest(".menu-container")&&!i.target.closest("button")&&d.value!==null&&(d.value=null,g.value=null)};z(()=>{w(),document.addEventListener("click",M)}),K(()=>{document.removeEventListener("click",M)});const F={apiUrl:s,brands:a,activeMenu:d,activeItem:g,loading:o,error:n,searchQuery:m,get searchTimeout(){return y},set searchTimeout(i){y=i},pagination:k,columns:V,fetchBrands:w,handleSearch:H,changePage:Q,handleDelete:Y,toggleMenu:G,handleClickOutside:M,DataTable:ut,Pagination:Bt,DashboardLayout:$,onMounted:z,ref:f,onUnmounted:K,get storage(){return D},get STORAGE_KEYS(){return N},get Swal(){return E},get axios(){return j}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},Mt={class:"container mx-auto rounded-lg"},Lt={class:"p-4 rounded-lg bg-pastel-light-100 dark:bg-pastel-dark-700"},jt={class:"flex mb-6"},Dt={class:"relative flex-1"},Nt={class:"hidden md:block"},At={class:"overflow-x-auto"},qt={class:"inline-block min-w-full align-middle"},Ot={class:"overflow-hidden shadow"},Ft={class:"td"},It=["src","alt"],zt={key:1,class:"text-2xl material-icons text-pastel-dark-700 dark:text-pastel-light-500"},Kt={class:"td"},Rt={class:"text-right td"},Ut={class:"relative inline-flex items-center justify-end gap-2"},Vt=["onClick"],Ht=["onClick"],Qt={class:"md:hidden"},Yt={key:0,class:"flex justify-center p-4"},Gt={key:1,class:"p-4 text-center text-pastel-red-600 dark:text-pastel-red-400"},Jt={key:2,class:"p-4 text-center text-pastel-dark-600 dark:text-pastel-dark-300"},Wt={key:3,class:"space-y-4"},Xt={class:"flex items-center space-x-4"},Zt={class:"flex-shrink-0"},$t=["src","alt"],te={key:1,class:"flex items-center justify-center w-12 h-12 text-3xl rounded-full bg-pastel-dark-100 dark:bg-pastel-dark-600"},ee={class:"flex-1 min-w-0"},ae={class:"text-sm font-medium text-pastel-dark-700 dark:text-pastel-light-200"},se={class:"relative"},ne=["onClick"],oe=["onClick"];function le(c,e,s,a,d,g){const o=X("router-link");return l(),I(a.DashboardLayout,null,{default:_(()=>[e[8]||(e[8]=t("div",{class:"container mx-auto mb-4"},[t("header",{class:"page-header"},[t("div",{class:"flex items-center gap-3"},[t("h1",{class:"flex items-center py-1.5 text-xl font-semibold text-pastel-dark-700 dark:text-pastel-light-500"},[t("span",{class:"material-icons"},"verified"),t("span",{class:"ml-1 text-pastel-dark-700 dark:text-pastel-light-500"},"Brand")])])])],-1)),t("div",Mt,[t("div",Lt,[t("div",jt,[t("div",Dt,[e[3]||(e[3]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[t("span",{class:"w-5 h-5 text-gray-400 material-icons"},"search")],-1)),A(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a.searchQuery=n),onInput:a.handleSearch,placeholder:"Cari brand...",class:"search-input-full",id:"pencarian",name:"pencarian"},null,544),[[Z,a.searchQuery]])])]),q(" desktop table "),t("div",Nt,[t("div",At,[t("div",qt,[t("div",Ot,[T(a.DataTable,{columns:a.columns,items:a.brands,loading:a.loading,error:a.error,"empty-message":"Tidak ada data brand"},{row:_(({item:n})=>[t("td",Ft,[n.logo!==null?(l(),r("img",{key:0,src:`${a.apiUrl}/public/assets/brands/logo/${n.logo}`,alt:n.name,class:"object-cover w-8 h-8 rounded-full"},null,8,It)):(l(),r("span",zt," branding_watermark "))]),t("td",Kt,p(n.name),1),t("td",Rt,[t("div",Ut,[T(R,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0",persisted:""},{default:_(()=>[A(t("div",{class:"absolute z-50 overflow-hidden border rounded-lg shadow-lg dark:border-pastel-dark-500 border-pastel-dark-300 bg-pastel-light-200 -bottom-3 right-14 dark:bg-pastel-dark-800 w-36 menu-container",onClick:e[1]||(e[1]=b(()=>{},["stop"]))},[T(o,{to:`/administrator/brand/${n.id}`,class:"block w-full px-4 py-3 font-bold text-left transition-colors text-pastel-dark-700 hover:bg-gray-100 dark:text-pastel-light-200 dark:hover:bg-pastel-dark-700"},{default:_(()=>e[4]||(e[4]=[x(" Edit ")])),_:2},1032,["to"]),t("button",{onClick:b(m=>a.handleDelete(n.id,n.name),["stop"]),class:"block w-full px-4 py-3 font-bold text-left transition-colors text-pastel-red-600 hover:bg-gray-100 dark:text-pastel-red-400 dark:hover:bg-pastel-dark-700"}," Hapus ",8,Vt)],512),[[U,a.activeMenu===n.id]])]),_:2},1024),t("button",{onClick:b(m=>a.toggleMenu(n.id,m),["stop"]),class:"font-bold btn btn-sm btn-blue btn-rounded"}," Aksi ",8,Ht)])])]),_:1},8,["items","loading","error"])])])])]),t("div",Qt,[a.loading?(l(),r("div",Yt,e[5]||(e[5]=[t("div",{class:"w-6 h-6 border-2 border-t-2 rounded-full border-pastel-dark-300 border-t-pastel-dark-700 animate-spin"},null,-1)]))):a.error?(l(),r("div",Gt,p(a.error),1)):a.brands.length===0?(l(),r("div",Jt," Tidak ada data brand ")):(l(),r("div",Wt,[(l(!0),r(B,null,S(a.brands,n=>(l(),r("div",{key:n.id,class:"p-4 border rounded-lg shadow-sm dark:border-pastel-dark-500 bg-pastel-light-200 dark:bg-pastel-dark-800"},[t("div",Xt,[t("div",Zt,[n.logo!==null?(l(),r("img",{key:0,src:`${a.apiUrl}/public/assets/brands/logo/${n.logo}`,alt:n.name,class:"object-cover w-12 h-12 rounded-full"},null,8,$t)):(l(),r("span",te,[...e[6]||(e[6]=[t("span",{class:"material-icons text-pastel-dark-700 dark:text-pastel-light-500"}," branding_watermark ",-1)])]))]),t("div",ee,[t("p",ae,p(n.name),1)]),t("div",se,[t("button",{onClick:b(m=>a.toggleMenu(n.id,m),["stop"]),class:"font-bold btn btn-sm btn-blue btn-rounded"}," Aksi ",8,ne),T(R,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0",persisted:""},{default:_(()=>[A(t("div",{class:"absolute right-0 z-50 overflow-hidden border rounded-lg shadow-lg top-10 dark:border-pastel-dark-500 border-pastel-dark-300 bg-pastel-light-200 dark:bg-pastel-dark-800 w-36 menu-container",onClick:e[2]||(e[2]=b(()=>{},["stop"]))},[T(o,{to:`/administrator/brand/${n.id}`,class:"block w-full px-4 py-3 font-bold text-left transition-colors text-pastel-dark-700 hover:bg-gray-100 dark:text-pastel-light-200 dark:hover:bg-pastel-dark-700"},{default:_(()=>[...e[7]||(e[7]=[x(" Edit ")])]),_:2},1032,["to"]),t("button",{onClick:b(m=>a.handleDelete(n.id,n.name),["stop"]),class:"block w-full px-4 py-3 font-bold text-left transition-colors text-pastel-red-600 hover:bg-gray-100 dark:text-pastel-red-400 dark:hover:bg-pastel-dark-700"}," Hapus ",8,oe)],512),[[U,a.activeMenu===n.id]])]),_:2},1024)])])]))),128))]))]),!a.loading&&a.brands.length>0?(l(),I(a.Pagination,{key:0,"current-page":a.pagination.current_page,"last-page":a.pagination.last_page,from:a.pagination.from,to:a.pagination.to,total:a.pagination.total,onChangePage:a.changePage},null,8,["current-page","last-page","from","to","total"])):q("v-if",!0)])])]),_:1})}const ce=O(St,[["render",le],["__file","C:/laragon/www/caricar/resources/js/components/admin/brands/Index.vue"]]);export{ce as default};
